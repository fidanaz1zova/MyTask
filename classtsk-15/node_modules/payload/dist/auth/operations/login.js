"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _jsonwebtoken = /*#__PURE__*/ _interop_require_default(require("jsonwebtoken"));
const _utils = require("../../collections/operations/utils");
const _errors = require("../../errors");
const _afterRead = require("../../fields/hooks/afterRead");
const _commitTransaction = require("../../utilities/commitTransaction");
const _getCookieExpiration = /*#__PURE__*/ _interop_require_default(require("../../utilities/getCookieExpiration"));
const _initTransaction = require("../../utilities/initTransaction");
const _killTransaction = require("../../utilities/killTransaction");
const _sanitizeInternalFields = /*#__PURE__*/ _interop_require_default(require("../../utilities/sanitizeInternalFields"));
const _isLocked = /*#__PURE__*/ _interop_require_default(require("../isLocked"));
const _authenticate = require("../strategies/local/authenticate");
const _incrementLoginAttempts = require("../strategies/local/incrementLoginAttempts");
const _resetLoginAttempts = require("../strategies/local/resetLoginAttempts");
const _getFieldsToSign = require("./getFieldsToSign");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
async function login(incomingArgs) {
    let args = incomingArgs;
    try {
        const shouldCommit = await (0, _initTransaction.initTransaction)(args.req);
        // /////////////////////////////////////
        // beforeOperation - Collection
        // /////////////////////////////////////
        await args.collection.config.hooks.beforeOperation.reduce(async (priorHook, hook)=>{
            await priorHook;
            args = await hook({
                args,
                collection: args.collection?.config,
                context: args.req.context,
                operation: 'login',
                req: args.req
            }) || args;
        }, Promise.resolve());
        const { collection: { config: collectionConfig }, data, depth, overrideAccess, req, req: { fallbackLocale, locale, payload, payload: { config, secret } }, showHiddenFields } = args;
        // /////////////////////////////////////
        // Login
        // /////////////////////////////////////
        const { email: unsanitizedEmail, password } = data;
        if (typeof unsanitizedEmail !== 'string' || unsanitizedEmail.trim() === '') {
            throw new _errors.ValidationError([
                {
                    field: 'email',
                    message: req.i18n.t('validation:required')
                }
            ]);
        }
        if (typeof password !== 'string' || password.trim() === '') {
            throw new _errors.ValidationError([
                {
                    field: 'password',
                    message: req.i18n.t('validation:required')
                }
            ]);
        }
        const email = unsanitizedEmail ? unsanitizedEmail.toLowerCase().trim() : null;
        let user = await payload.db.findOne({
            collection: collectionConfig.slug,
            req,
            where: {
                email: {
                    equals: email.toLowerCase()
                }
            }
        });
        if (!user || args.collection.config.auth.verify && user._verified === false) {
            throw new _errors.AuthenticationError(req.t);
        }
        if (user && (0, _isLocked.default)(user.lockUntil)) {
            throw new _errors.LockedAuth(req.t);
        }
        const authResult = await (0, _authenticate.authenticateLocalStrategy)({
            doc: user,
            password
        });
        user = (0, _sanitizeInternalFields.default)(user);
        const maxLoginAttemptsEnabled = args.collection.config.auth.maxLoginAttempts > 0;
        if (!authResult) {
            if (maxLoginAttemptsEnabled) {
                await (0, _incrementLoginAttempts.incrementLoginAttempts)({
                    collection: collectionConfig,
                    doc: user,
                    payload: req.payload,
                    req
                });
            }
            if (shouldCommit) await (0, _commitTransaction.commitTransaction)(req);
            throw new _errors.AuthenticationError(req.t);
        }
        if (maxLoginAttemptsEnabled) {
            await (0, _resetLoginAttempts.resetLoginAttempts)({
                collection: collectionConfig,
                doc: user,
                payload: req.payload,
                req
            });
        }
        const fieldsToSign = (0, _getFieldsToSign.getFieldsToSign)({
            collectionConfig,
            email,
            user
        });
        await collectionConfig.hooks.beforeLogin.reduce(async (priorHook, hook)=>{
            await priorHook;
            user = await hook({
                collection: args.collection?.config,
                context: args.req.context,
                req: args.req,
                user
            }) || user;
        }, Promise.resolve());
        const token = _jsonwebtoken.default.sign(fieldsToSign, secret, {
            expiresIn: collectionConfig.auth.tokenExpiration
        });
        if (args.res) {
            const cookieOptions = {
                domain: undefined,
                expires: (0, _getCookieExpiration.default)(collectionConfig.auth.tokenExpiration),
                httpOnly: true,
                path: '/',
                sameSite: collectionConfig.auth.cookies.sameSite,
                secure: collectionConfig.auth.cookies.secure
            };
            if (collectionConfig.auth.cookies.domain) cookieOptions.domain = collectionConfig.auth.cookies.domain;
            args.res.cookie(`${config.cookiePrefix}-token`, token, cookieOptions);
        }
        req.user = user;
        // /////////////////////////////////////
        // afterLogin - Collection
        // /////////////////////////////////////
        await collectionConfig.hooks.afterLogin.reduce(async (priorHook, hook)=>{
            await priorHook;
            user = await hook({
                collection: args.collection?.config,
                context: args.req.context,
                req: args.req,
                token,
                user
            }) || user;
        }, Promise.resolve());
        // /////////////////////////////////////
        // afterRead - Fields
        // /////////////////////////////////////
        user = await (0, _afterRead.afterRead)({
            collection: collectionConfig,
            context: req.context,
            depth,
            doc: user,
            fallbackLocale,
            global: null,
            locale,
            overrideAccess,
            req,
            showHiddenFields
        });
        // /////////////////////////////////////
        // afterRead - Collection
        // /////////////////////////////////////
        await collectionConfig.hooks.afterRead.reduce(async (priorHook, hook)=>{
            await priorHook;
            user = await hook({
                collection: args.collection?.config,
                context: req.context,
                doc: user,
                req
            }) || user;
        }, Promise.resolve());
        // /////////////////////////////////////
        // afterRead - Collection
        // /////////////////////////////////////
        await collectionConfig.hooks.afterRead.reduce(async (priorHook, hook)=>{
            await priorHook;
            user = await hook({
                collection: args.collection?.config,
                context: req.context,
                doc: user,
                req
            }) || user;
        }, Promise.resolve());
        let result = {
            exp: _jsonwebtoken.default.decode(token).exp,
            token,
            user
        };
        // /////////////////////////////////////
        // afterOperation - Collection
        // /////////////////////////////////////
        result = await (0, _utils.buildAfterOperation)({
            args,
            collection: args.collection?.config,
            operation: 'login',
            result
        });
        if (collectionConfig.auth.removeTokenFromResponses) {
            delete result.token;
        }
        // /////////////////////////////////////
        // Return results
        // /////////////////////////////////////
        if (shouldCommit) await (0, _commitTransaction.commitTransaction)(req);
        return result;
    } catch (error) {
        await (0, _killTransaction.killTransaction)(args.req);
        throw error;
    }
}
const _default = login;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hdXRoL29wZXJhdGlvbnMvbG9naW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDb29raWVPcHRpb25zLCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnXG5cbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJ1xuXG5pbXBvcnQgdHlwZSB7IEdlbmVyYXRlZFR5cGVzIH0gZnJvbSAnLi4vLi4vJ1xuaW1wb3J0IHR5cGUgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi4vLi4vY29sbGVjdGlvbnMvY29uZmlnL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCB9IGZyb20gJy4uLy4uL2V4cHJlc3MvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IFVzZXIgfSBmcm9tICcuLi90eXBlcydcblxuaW1wb3J0IHsgYnVpbGRBZnRlck9wZXJhdGlvbiB9IGZyb20gJy4uLy4uL2NvbGxlY3Rpb25zL29wZXJhdGlvbnMvdXRpbHMnXG5pbXBvcnQgeyBBdXRoZW50aWNhdGlvbkVycm9yLCBMb2NrZWRBdXRoLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuLi8uLi9lcnJvcnMnXG5pbXBvcnQgeyBhZnRlclJlYWQgfSBmcm9tICcuLi8uLi9maWVsZHMvaG9va3MvYWZ0ZXJSZWFkJ1xuaW1wb3J0IHsgY29tbWl0VHJhbnNhY3Rpb24gfSBmcm9tICcuLi8uLi91dGlsaXRpZXMvY29tbWl0VHJhbnNhY3Rpb24nXG5pbXBvcnQgZ2V0Q29va2llRXhwaXJhdGlvbiBmcm9tICcuLi8uLi91dGlsaXRpZXMvZ2V0Q29va2llRXhwaXJhdGlvbidcbmltcG9ydCB7IGluaXRUcmFuc2FjdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9pbml0VHJhbnNhY3Rpb24nXG5pbXBvcnQgeyBraWxsVHJhbnNhY3Rpb24gfSBmcm9tICcuLi8uLi91dGlsaXRpZXMva2lsbFRyYW5zYWN0aW9uJ1xuaW1wb3J0IHNhbml0aXplSW50ZXJuYWxGaWVsZHMgZnJvbSAnLi4vLi4vdXRpbGl0aWVzL3Nhbml0aXplSW50ZXJuYWxGaWVsZHMnXG5pbXBvcnQgaXNMb2NrZWQgZnJvbSAnLi4vaXNMb2NrZWQnXG5pbXBvcnQgeyBhdXRoZW50aWNhdGVMb2NhbFN0cmF0ZWd5IH0gZnJvbSAnLi4vc3RyYXRlZ2llcy9sb2NhbC9hdXRoZW50aWNhdGUnXG5pbXBvcnQgeyBpbmNyZW1lbnRMb2dpbkF0dGVtcHRzIH0gZnJvbSAnLi4vc3RyYXRlZ2llcy9sb2NhbC9pbmNyZW1lbnRMb2dpbkF0dGVtcHRzJ1xuaW1wb3J0IHsgcmVzZXRMb2dpbkF0dGVtcHRzIH0gZnJvbSAnLi4vc3RyYXRlZ2llcy9sb2NhbC9yZXNldExvZ2luQXR0ZW1wdHMnXG5pbXBvcnQgeyBnZXRGaWVsZHNUb1NpZ24gfSBmcm9tICcuL2dldEZpZWxkc1RvU2lnbidcblxuZXhwb3J0IHR5cGUgUmVzdWx0ID0ge1xuICBleHA/OiBudW1iZXJcbiAgdG9rZW4/OiBzdHJpbmdcbiAgdXNlcj86IFVzZXJcbn1cblxuZXhwb3J0IHR5cGUgQXJndW1lbnRzID0ge1xuICBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uXG4gIGRhdGE6IHtcbiAgICBlbWFpbDogc3RyaW5nXG4gICAgcGFzc3dvcmQ6IHN0cmluZ1xuICB9XG4gIGRlcHRoPzogbnVtYmVyXG4gIG92ZXJyaWRlQWNjZXNzPzogYm9vbGVhblxuICByZXE6IFBheWxvYWRSZXF1ZXN0XG4gIHJlcz86IFJlc3BvbnNlXG4gIHNob3dIaWRkZW5GaWVsZHM/OiBib29sZWFuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvZ2luPFRTbHVnIGV4dGVuZHMga2V5b2YgR2VuZXJhdGVkVHlwZXNbJ2NvbGxlY3Rpb25zJ10+KFxuICBpbmNvbWluZ0FyZ3M6IEFyZ3VtZW50cyxcbik6IFByb21pc2U8UmVzdWx0ICYgeyB1c2VyOiBHZW5lcmF0ZWRUeXBlc1snY29sbGVjdGlvbnMnXVtUU2x1Z10gfT4ge1xuICBsZXQgYXJncyA9IGluY29taW5nQXJnc1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgc2hvdWxkQ29tbWl0ID0gYXdhaXQgaW5pdFRyYW5zYWN0aW9uKGFyZ3MucmVxKVxuXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIGJlZm9yZU9wZXJhdGlvbiAtIENvbGxlY3Rpb25cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBhd2FpdCBhcmdzLmNvbGxlY3Rpb24uY29uZmlnLmhvb2tzLmJlZm9yZU9wZXJhdGlvbi5yZWR1Y2UoYXN5bmMgKHByaW9ySG9vaywgaG9vaykgPT4ge1xuICAgICAgYXdhaXQgcHJpb3JIb29rXG5cbiAgICAgIGFyZ3MgPVxuICAgICAgICAoYXdhaXQgaG9vayh7XG4gICAgICAgICAgYXJncyxcbiAgICAgICAgICBjb2xsZWN0aW9uOiBhcmdzLmNvbGxlY3Rpb24/LmNvbmZpZyxcbiAgICAgICAgICBjb250ZXh0OiBhcmdzLnJlcS5jb250ZXh0LFxuICAgICAgICAgIG9wZXJhdGlvbjogJ2xvZ2luJyxcbiAgICAgICAgICByZXE6IGFyZ3MucmVxLFxuICAgICAgICB9KSkgfHwgYXJnc1xuICAgIH0sIFByb21pc2UucmVzb2x2ZSgpKVxuXG4gICAgY29uc3Qge1xuICAgICAgY29sbGVjdGlvbjogeyBjb25maWc6IGNvbGxlY3Rpb25Db25maWcgfSxcbiAgICAgIGRhdGEsXG4gICAgICBkZXB0aCxcbiAgICAgIG92ZXJyaWRlQWNjZXNzLFxuICAgICAgcmVxLFxuICAgICAgcmVxOiB7XG4gICAgICAgIGZhbGxiYWNrTG9jYWxlLFxuICAgICAgICBsb2NhbGUsXG4gICAgICAgIHBheWxvYWQsXG4gICAgICAgIHBheWxvYWQ6IHsgY29uZmlnLCBzZWNyZXQgfSxcbiAgICAgIH0sXG4gICAgICBzaG93SGlkZGVuRmllbGRzLFxuICAgIH0gPSBhcmdzXG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gTG9naW5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBjb25zdCB7IGVtYWlsOiB1bnNhbml0aXplZEVtYWlsLCBwYXNzd29yZCB9ID0gZGF0YVxuXG4gICAgaWYgKHR5cGVvZiB1bnNhbml0aXplZEVtYWlsICE9PSAnc3RyaW5nJyB8fCB1bnNhbml0aXplZEVtYWlsLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoW3sgZmllbGQ6ICdlbWFpbCcsIG1lc3NhZ2U6IHJlcS5pMThuLnQoJ3ZhbGlkYXRpb246cmVxdWlyZWQnKSB9XSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXNzd29yZCAhPT0gJ3N0cmluZycgfHwgcGFzc3dvcmQudHJpbSgpID09PSAnJykge1xuICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihbeyBmaWVsZDogJ3Bhc3N3b3JkJywgbWVzc2FnZTogcmVxLmkxOG4udCgndmFsaWRhdGlvbjpyZXF1aXJlZCcpIH1dKVxuICAgIH1cblxuICAgIGNvbnN0IGVtYWlsID0gdW5zYW5pdGl6ZWRFbWFpbCA/IHVuc2FuaXRpemVkRW1haWwudG9Mb3dlckNhc2UoKS50cmltKCkgOiBudWxsXG5cbiAgICBsZXQgdXNlciA9IGF3YWl0IHBheWxvYWQuZGIuZmluZE9uZTxhbnk+KHtcbiAgICAgIGNvbGxlY3Rpb246IGNvbGxlY3Rpb25Db25maWcuc2x1ZyxcbiAgICAgIHJlcSxcbiAgICAgIHdoZXJlOiB7IGVtYWlsOiB7IGVxdWFsczogZW1haWwudG9Mb3dlckNhc2UoKSB9IH0sXG4gICAgfSlcblxuICAgIGlmICghdXNlciB8fCAoYXJncy5jb2xsZWN0aW9uLmNvbmZpZy5hdXRoLnZlcmlmeSAmJiB1c2VyLl92ZXJpZmllZCA9PT0gZmFsc2UpKSB7XG4gICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihyZXEudClcbiAgICB9XG5cbiAgICBpZiAodXNlciAmJiBpc0xvY2tlZCh1c2VyLmxvY2tVbnRpbCkpIHtcbiAgICAgIHRocm93IG5ldyBMb2NrZWRBdXRoKHJlcS50KVxuICAgIH1cblxuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCBhdXRoZW50aWNhdGVMb2NhbFN0cmF0ZWd5KHsgZG9jOiB1c2VyLCBwYXNzd29yZCB9KVxuXG4gICAgdXNlciA9IHNhbml0aXplSW50ZXJuYWxGaWVsZHModXNlcilcblxuICAgIGNvbnN0IG1heExvZ2luQXR0ZW1wdHNFbmFibGVkID0gYXJncy5jb2xsZWN0aW9uLmNvbmZpZy5hdXRoLm1heExvZ2luQXR0ZW1wdHMgPiAwXG5cbiAgICBpZiAoIWF1dGhSZXN1bHQpIHtcbiAgICAgIGlmIChtYXhMb2dpbkF0dGVtcHRzRW5hYmxlZCkge1xuICAgICAgICBhd2FpdCBpbmNyZW1lbnRMb2dpbkF0dGVtcHRzKHtcbiAgICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgICAgIGRvYzogdXNlcixcbiAgICAgICAgICBwYXlsb2FkOiByZXEucGF5bG9hZCxcbiAgICAgICAgICByZXEsXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChzaG91bGRDb21taXQpIGF3YWl0IGNvbW1pdFRyYW5zYWN0aW9uKHJlcSlcblxuICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IocmVxLnQpXG4gICAgfVxuXG4gICAgaWYgKG1heExvZ2luQXR0ZW1wdHNFbmFibGVkKSB7XG4gICAgICBhd2FpdCByZXNldExvZ2luQXR0ZW1wdHMoe1xuICAgICAgICBjb2xsZWN0aW9uOiBjb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgICBkb2M6IHVzZXIsXG4gICAgICAgIHBheWxvYWQ6IHJlcS5wYXlsb2FkLFxuICAgICAgICByZXEsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGZpZWxkc1RvU2lnbiA9IGdldEZpZWxkc1RvU2lnbih7XG4gICAgICBjb2xsZWN0aW9uQ29uZmlnLFxuICAgICAgZW1haWwsXG4gICAgICB1c2VyLFxuICAgIH0pXG5cbiAgICBhd2FpdCBjb2xsZWN0aW9uQ29uZmlnLmhvb2tzLmJlZm9yZUxvZ2luLnJlZHVjZShhc3luYyAocHJpb3JIb29rLCBob29rKSA9PiB7XG4gICAgICBhd2FpdCBwcmlvckhvb2tcblxuICAgICAgdXNlciA9XG4gICAgICAgIChhd2FpdCBob29rKHtcbiAgICAgICAgICBjb2xsZWN0aW9uOiBhcmdzLmNvbGxlY3Rpb24/LmNvbmZpZyxcbiAgICAgICAgICBjb250ZXh0OiBhcmdzLnJlcS5jb250ZXh0LFxuICAgICAgICAgIHJlcTogYXJncy5yZXEsXG4gICAgICAgICAgdXNlcixcbiAgICAgICAgfSkpIHx8IHVzZXJcbiAgICB9LCBQcm9taXNlLnJlc29sdmUoKSlcblxuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oZmllbGRzVG9TaWduLCBzZWNyZXQsIHtcbiAgICAgIGV4cGlyZXNJbjogY29sbGVjdGlvbkNvbmZpZy5hdXRoLnRva2VuRXhwaXJhdGlvbixcbiAgICB9KVxuXG4gICAgaWYgKGFyZ3MucmVzKSB7XG4gICAgICBjb25zdCBjb29raWVPcHRpb25zOiBDb29raWVPcHRpb25zID0ge1xuICAgICAgICBkb21haW46IHVuZGVmaW5lZCxcbiAgICAgICAgZXhwaXJlczogZ2V0Q29va2llRXhwaXJhdGlvbihjb2xsZWN0aW9uQ29uZmlnLmF1dGgudG9rZW5FeHBpcmF0aW9uKSxcbiAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgIHBhdGg6ICcvJyxcbiAgICAgICAgc2FtZVNpdGU6IGNvbGxlY3Rpb25Db25maWcuYXV0aC5jb29raWVzLnNhbWVTaXRlLFxuICAgICAgICBzZWN1cmU6IGNvbGxlY3Rpb25Db25maWcuYXV0aC5jb29raWVzLnNlY3VyZSxcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbGxlY3Rpb25Db25maWcuYXV0aC5jb29raWVzLmRvbWFpbilcbiAgICAgICAgY29va2llT3B0aW9ucy5kb21haW4gPSBjb2xsZWN0aW9uQ29uZmlnLmF1dGguY29va2llcy5kb21haW5cblxuICAgICAgYXJncy5yZXMuY29va2llKGAke2NvbmZpZy5jb29raWVQcmVmaXh9LXRva2VuYCwgdG9rZW4sIGNvb2tpZU9wdGlvbnMpXG4gICAgfVxuXG4gICAgcmVxLnVzZXIgPSB1c2VyXG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gYWZ0ZXJMb2dpbiAtIENvbGxlY3Rpb25cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBhd2FpdCBjb2xsZWN0aW9uQ29uZmlnLmhvb2tzLmFmdGVyTG9naW4ucmVkdWNlKGFzeW5jIChwcmlvckhvb2ssIGhvb2spID0+IHtcbiAgICAgIGF3YWl0IHByaW9ySG9va1xuXG4gICAgICB1c2VyID1cbiAgICAgICAgKGF3YWl0IGhvb2soe1xuICAgICAgICAgIGNvbGxlY3Rpb246IGFyZ3MuY29sbGVjdGlvbj8uY29uZmlnLFxuICAgICAgICAgIGNvbnRleHQ6IGFyZ3MucmVxLmNvbnRleHQsXG4gICAgICAgICAgcmVxOiBhcmdzLnJlcSxcbiAgICAgICAgICB0b2tlbixcbiAgICAgICAgICB1c2VyLFxuICAgICAgICB9KSkgfHwgdXNlclxuICAgIH0sIFByb21pc2UucmVzb2x2ZSgpKVxuXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIGFmdGVyUmVhZCAtIEZpZWxkc1xuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIHVzZXIgPSBhd2FpdCBhZnRlclJlYWQoe1xuICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbkNvbmZpZyxcbiAgICAgIGNvbnRleHQ6IHJlcS5jb250ZXh0LFxuICAgICAgZGVwdGgsXG4gICAgICBkb2M6IHVzZXIsXG4gICAgICBmYWxsYmFja0xvY2FsZSxcbiAgICAgIGdsb2JhbDogbnVsbCxcbiAgICAgIGxvY2FsZSxcbiAgICAgIG92ZXJyaWRlQWNjZXNzLFxuICAgICAgcmVxLFxuICAgICAgc2hvd0hpZGRlbkZpZWxkcyxcbiAgICB9KVxuXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIGFmdGVyUmVhZCAtIENvbGxlY3Rpb25cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBhd2FpdCBjb2xsZWN0aW9uQ29uZmlnLmhvb2tzLmFmdGVyUmVhZC5yZWR1Y2UoYXN5bmMgKHByaW9ySG9vaywgaG9vaykgPT4ge1xuICAgICAgYXdhaXQgcHJpb3JIb29rXG5cbiAgICAgIHVzZXIgPVxuICAgICAgICAoYXdhaXQgaG9vayh7XG4gICAgICAgICAgY29sbGVjdGlvbjogYXJncy5jb2xsZWN0aW9uPy5jb25maWcsXG4gICAgICAgICAgY29udGV4dDogcmVxLmNvbnRleHQsXG4gICAgICAgICAgZG9jOiB1c2VyLFxuICAgICAgICAgIHJlcSxcbiAgICAgICAgfSkpIHx8IHVzZXJcbiAgICB9LCBQcm9taXNlLnJlc29sdmUoKSlcblxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBhZnRlclJlYWQgLSBDb2xsZWN0aW9uXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgYXdhaXQgY29sbGVjdGlvbkNvbmZpZy5ob29rcy5hZnRlclJlYWQucmVkdWNlKGFzeW5jIChwcmlvckhvb2ssIGhvb2spID0+IHtcbiAgICAgIGF3YWl0IHByaW9ySG9va1xuXG4gICAgICB1c2VyID1cbiAgICAgICAgKGF3YWl0IGhvb2soe1xuICAgICAgICAgIGNvbGxlY3Rpb246IGFyZ3MuY29sbGVjdGlvbj8uY29uZmlnLFxuICAgICAgICAgIGNvbnRleHQ6IHJlcS5jb250ZXh0LFxuICAgICAgICAgIGRvYzogdXNlcixcbiAgICAgICAgICByZXEsXG4gICAgICAgIH0pKSB8fCB1c2VyXG4gICAgfSwgUHJvbWlzZS5yZXNvbHZlKCkpXG5cbiAgICBsZXQgcmVzdWx0OiBSZXN1bHQgJiB7IHVzZXI6IEdlbmVyYXRlZFR5cGVzWydjb2xsZWN0aW9ucyddW1RTbHVnXSB9ID0ge1xuICAgICAgZXhwOiAoand0LmRlY29kZSh0b2tlbikgYXMgand0Lkp3dFBheWxvYWQpLmV4cCxcbiAgICAgIHRva2VuLFxuICAgICAgdXNlcixcbiAgICB9XG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gYWZ0ZXJPcGVyYXRpb24gLSBDb2xsZWN0aW9uXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgcmVzdWx0ID0gYXdhaXQgYnVpbGRBZnRlck9wZXJhdGlvbjxHZW5lcmF0ZWRUeXBlc1snY29sbGVjdGlvbnMnXVtUU2x1Z10+KHtcbiAgICAgIGFyZ3MsXG4gICAgICBjb2xsZWN0aW9uOiBhcmdzLmNvbGxlY3Rpb24/LmNvbmZpZyxcbiAgICAgIG9wZXJhdGlvbjogJ2xvZ2luJyxcbiAgICAgIHJlc3VsdCxcbiAgICB9KVxuXG4gICAgaWYgKGNvbGxlY3Rpb25Db25maWcuYXV0aC5yZW1vdmVUb2tlbkZyb21SZXNwb25zZXMpIHtcbiAgICAgIGRlbGV0ZSByZXN1bHQudG9rZW5cbiAgICB9XG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gUmV0dXJuIHJlc3VsdHNcbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBpZiAoc2hvdWxkQ29tbWl0KSBhd2FpdCBjb21taXRUcmFuc2FjdGlvbihyZXEpXG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgYXdhaXQga2lsbFRyYW5zYWN0aW9uKGFyZ3MucmVxKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbG9naW5cbiJdLCJuYW1lcyI6WyJsb2dpbiIsImluY29taW5nQXJncyIsImFyZ3MiLCJzaG91bGRDb21taXQiLCJpbml0VHJhbnNhY3Rpb24iLCJyZXEiLCJjb2xsZWN0aW9uIiwiY29uZmlnIiwiaG9va3MiLCJiZWZvcmVPcGVyYXRpb24iLCJyZWR1Y2UiLCJwcmlvckhvb2siLCJob29rIiwiY29udGV4dCIsIm9wZXJhdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwiY29sbGVjdGlvbkNvbmZpZyIsImRhdGEiLCJkZXB0aCIsIm92ZXJyaWRlQWNjZXNzIiwiZmFsbGJhY2tMb2NhbGUiLCJsb2NhbGUiLCJwYXlsb2FkIiwic2VjcmV0Iiwic2hvd0hpZGRlbkZpZWxkcyIsImVtYWlsIiwidW5zYW5pdGl6ZWRFbWFpbCIsInBhc3N3b3JkIiwidHJpbSIsIlZhbGlkYXRpb25FcnJvciIsImZpZWxkIiwibWVzc2FnZSIsImkxOG4iLCJ0IiwidG9Mb3dlckNhc2UiLCJ1c2VyIiwiZGIiLCJmaW5kT25lIiwic2x1ZyIsIndoZXJlIiwiZXF1YWxzIiwiYXV0aCIsInZlcmlmeSIsIl92ZXJpZmllZCIsIkF1dGhlbnRpY2F0aW9uRXJyb3IiLCJpc0xvY2tlZCIsImxvY2tVbnRpbCIsIkxvY2tlZEF1dGgiLCJhdXRoUmVzdWx0IiwiYXV0aGVudGljYXRlTG9jYWxTdHJhdGVneSIsImRvYyIsInNhbml0aXplSW50ZXJuYWxGaWVsZHMiLCJtYXhMb2dpbkF0dGVtcHRzRW5hYmxlZCIsIm1heExvZ2luQXR0ZW1wdHMiLCJpbmNyZW1lbnRMb2dpbkF0dGVtcHRzIiwiY29tbWl0VHJhbnNhY3Rpb24iLCJyZXNldExvZ2luQXR0ZW1wdHMiLCJmaWVsZHNUb1NpZ24iLCJnZXRGaWVsZHNUb1NpZ24iLCJiZWZvcmVMb2dpbiIsInRva2VuIiwiand0Iiwic2lnbiIsImV4cGlyZXNJbiIsInRva2VuRXhwaXJhdGlvbiIsInJlcyIsImNvb2tpZU9wdGlvbnMiLCJkb21haW4iLCJ1bmRlZmluZWQiLCJleHBpcmVzIiwiZ2V0Q29va2llRXhwaXJhdGlvbiIsImh0dHBPbmx5IiwicGF0aCIsInNhbWVTaXRlIiwiY29va2llcyIsInNlY3VyZSIsImNvb2tpZSIsImNvb2tpZVByZWZpeCIsImFmdGVyTG9naW4iLCJhZnRlclJlYWQiLCJnbG9iYWwiLCJyZXN1bHQiLCJleHAiLCJkZWNvZGUiLCJidWlsZEFmdGVyT3BlcmF0aW9uIiwicmVtb3ZlVG9rZW5Gcm9tUmVzcG9uc2VzIiwiZXJyb3IiLCJraWxsVHJhbnNhY3Rpb24iXSwibWFwcGluZ3MiOiI7Ozs7K0JBeVJBOzs7ZUFBQTs7O3FFQXZSZ0I7dUJBT29CO3dCQUM2QjsyQkFDdkM7bUNBQ1E7NEVBQ0Y7aUNBQ0E7aUNBQ0E7K0VBQ0c7aUVBQ2Q7OEJBQ3FCO3dDQUNIO29DQUNKO2lDQUNIOzs7Ozs7QUFxQmhDLGVBQWVBLE1BQ2JDLFlBQXVCO0lBRXZCLElBQUlDLE9BQU9EO0lBRVgsSUFBSTtRQUNGLE1BQU1FLGVBQWUsTUFBTUMsSUFBQUEsZ0NBQWUsRUFBQ0YsS0FBS0csR0FBRztRQUVuRCx3Q0FBd0M7UUFDeEMsK0JBQStCO1FBQy9CLHdDQUF3QztRQUV4QyxNQUFNSCxLQUFLSSxVQUFVLENBQUNDLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDQyxlQUFlLENBQUNDLE1BQU0sQ0FBQyxPQUFPQyxXQUFXQztZQUMxRSxNQUFNRDtZQUVOVCxPQUNFLEFBQUMsTUFBTVUsS0FBSztnQkFDVlY7Z0JBQ0FJLFlBQVlKLEtBQUtJLFVBQVUsRUFBRUM7Z0JBQzdCTSxTQUFTWCxLQUFLRyxHQUFHLENBQUNRLE9BQU87Z0JBQ3pCQyxXQUFXO2dCQUNYVCxLQUFLSCxLQUFLRyxHQUFHO1lBQ2YsTUFBT0g7UUFDWCxHQUFHYSxRQUFRQyxPQUFPO1FBRWxCLE1BQU0sRUFDSlYsWUFBWSxFQUFFQyxRQUFRVSxnQkFBZ0IsRUFBRSxFQUN4Q0MsSUFBSSxFQUNKQyxLQUFLLEVBQ0xDLGNBQWMsRUFDZGYsR0FBRyxFQUNIQSxLQUFLLEVBQ0hnQixj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